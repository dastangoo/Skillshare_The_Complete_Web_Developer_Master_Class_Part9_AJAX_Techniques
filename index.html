<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Learn AJAX</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="css/bootstrap-theme.min.css"> -->
    <style media="screen">
      .form1 {
        padding-top: 30px;
      }
      #ret-data {
        text-align: center;
      }
    </style>
    <script src="js/jquery.js">
      
    </script>
    <script src="js/bootstrap.min.js">
    </script>
    <script>
      function ajax_func() {
        
        xmlhttp = new XMLHttpRequest();
        // var user_input = document.getElementById('user-input').value;
        xmlhttp.onreadystatechange = function () {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById('table_body').innerHTML = xmlhttp.responseText;
          }
        }
        xmlhttp.open('POST', 'process_ajax.php', true);
        xmlhttp.send();        
      }
      function submit_form() {
        var user_form = document.getElementById('user_form');
        var name = document.getElementById('name').value,
            email = document.getElementById('email').value,
            contact_number = document.getElementById('contact_number').value,
            notes = document.getElementById('notes').value;
            
        // AJAX Processing from Here
        xmlhttp.onreadystatechange = function () {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById('table_body').innerHTML = xmlhttp.responseText;
          }
        }

        xmlhttp.open('GET', 'process_ajax.php?submit_form=yes&name=' + name +'&email=' + email + '&contact_number=' + contact_number + '&notes=' + notes, true);
        xmlhttp.send();             
        // AJAX Ending   
        
        $('#add_new_person').hide();
        // user_form.reset();
        
        return false;
      }
    </script>
  </head>
  <body onload="ajax_func();">
    <div class="container">
      <br><br>
      <table class="table table-striped table-hover table-bordered text-center">
        <!-- <button class="btn btn-warning btn-lg" onclick="ajax_func();">Click to Retrieve</button> -->
        <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#add_new_person" data-backdrop="static">Add New Person</button>
        <div class="modal fade" id="add_new_person">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
                <h4>Add New Person</h4>
              </div>
              <div class="modal-body">
                <form onsubmit="return submit_form();" id="user_form">
                  <div class="form-group">
                    <label for="name"></label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Your Name" autofocus required>
                  </div>
                  <div class="form-group">
                    <label for="email"></label>
                    <input type="text" class="form-control" id="email" name="email" placeholder="Your Email" required>
                  </div>
                  <div class="form-group">
                    <label for="contact_number"></label>
                    <input type="text" class="form-control" id="contact_number" name="contact_number" placeholder="Your Contact Number" required>
                  </div>
                  <div class="form-group">
                    <label for="notes"></label>
                    <textarea class="form-control" id="notes"  rows="5" name="notes" placeholder="Your Notes" required></textarea>
                  </div>
                  <div class="form-group">
                    <button class="btn btn-info btn-block btn-lg" name="submit" id="submit">Submit</button>
                  </div>                  
                </form>
              </div>
              <div class="modal-footer">
                <div class="text-right">
                  <button class="btn btn-danger" data-dismiss="modal">Close</button>                  
                </div>
              </div>
            </div>
          </div>          
        </div>
        <br><br>
        <thead>
          <tr>
            <th>S.No</th>
            <th>Name</th>
            <th>Email</th>
            <th>Contact Number</th>
            <th>Notes</th>
            <th>Edit / Delete</th>
          </tr>
        </thead>
        <tbody id="table_body">
        </tbody>
      </table>
    </div>
  </body>
</html>